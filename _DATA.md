# Data Registry
> @CONTEXT: Global | _DATA.md | @TAGS: @DATA @MODELS
> æœ€åæ›´æ–° (Last Updated): 2026-01-31 16:47:56

> **Goal**: é›†ä¸­å±•ç¤ºé¡¹ç›®ä¸­çš„æ ¸å¿ƒæ•°æ®ç»“æ„ (Dataclasses, Enums, TypedDicts)ã€‚å¼ºåŒ– "Logic as Data" åŸåˆ™ã€‚

## Dataclasses
*   **AstNode** ([src/ndoc/atoms/ast/base.py](src/ndoc/atoms/ast/base.py)) - *é€šç”¨ AST èŠ‚ç‚¹æ•°æ®ç»“æ„ (Generic AST Node Data).*
    ```python
    type: str
    text: str
    start_point: tuple[int, int]  # (row, col)
    end_point: tuple[int, int]
    children: list['AstNode'] = field(default_factory=list)
    ```
*   **DataDefinition** ([src/ndoc/flows/data_flow.py](src/ndoc/flows/data_flow.py))
    ```python
    name: str
    type: str  # dataclass, enum, typeddict
    path: str
    docstring: str
    fields: List[str]
    ```
*   **DirectoryContext** ([src/ndoc/models/context.py](src/ndoc/models/context.py)) - *ç›®å½•ä¸Šä¸‹æ–‡ (Directory Context).*
    ```python
    path: Path
    files: List[FileContext] = field(default_factory=list)
    subdirs: List[Path] = field(default_factory=list)
    ```
*   **FileContext** ([src/ndoc/models/context.py](src/ndoc/models/context.py)) - *æ–‡ä»¶ä¸Šä¸‹æ–‡ (File Context).*
    ```python
    path: Path
    rel_path: str
    content: Optional[str] = None
    tags: List[Tag] = field(default_factory=list)
    sections: Dict[str, Section] = field(default_factory=dict)
    symbols: List[Symbol] = field(default_factory=list) # Extracted symbols
    docstring: Optional[str] = None
    is_core: bool = False # Whether file is marked as @CORE
    ast_tree: Any = None # Optional[Tree] from tree-sitter
    title: Optional[str] = None
    ```
*   **FileFilter** ([src/ndoc/atoms/fs.py](src/ndoc/atoms/fs.py)) - *æ–‡ä»¶è¿‡æ»¤å™¨é…ç½® (File Filter Configuration).*
    ```python
    ignore_patterns: Set[str] = field(default_factory=set)
    allow_extensions: Set[str] = field(default_factory=set)
    spec: Optional[pathspec.PathSpec] = None
    ```
*   **MapContext** ([src/ndoc/flows/map_flow.py](src/ndoc/flows/map_flow.py))
    ```python
    root: Path
    ignore_patterns: List[str]
    ```
*   **ProjectConfig** ([src/ndoc/models/config.py](src/ndoc/models/config.py)) - *é¡¹ç›®å…¨å±€é…ç½® (Global Project Configuration).*
    ```python
    scan: ScanConfig
    name: str = "Project"
    version: str = "0.1.0"
    ```
*   **ScanConfig** ([src/ndoc/models/config.py](src/ndoc/models/config.py)) - *æ‰«æé…ç½® (Configuration for file scanning).*
    ```python
    root_path: Path
    ignore_patterns: List[str] = field(default_factory=lambda: [
    extensions: List[str] = field(default_factory=list)
    ```
*   **ScanResult** ([src/ndoc/atoms/scanner.py](src/ndoc/atoms/scanner.py)) - *æ‰«æç»“æœ (Scan Result).*
    ```python
    tags: List[Tag] = field(default_factory=list)
    sections: Dict[str, Section] = field(default_factory=dict)
    symbols: List[Symbol] = field(default_factory=list)
    docstring: str = ""
    summary: str = ""
    todos: List[dict] = field(default_factory=list)  # Captured TODOs
    calls: List[str] = field(default_factory=list)  # Captured calls
    imports: List[str] = field(default_factory=list)  # Captured imports
    is_core: bool = False # Whether file is marked as @CORE
    ```
*   **Section** ([src/ndoc/models/context.py](src/ndoc/models/context.py)) - *æ–‡æ¡£ç‰‡æ®µ (Document Section).*
    ```python
    name: str
    content: str
    raw: str
    start_pos: int
    end_pos: int
    ```
*   **Symbol** ([src/ndoc/models/context.py](src/ndoc/models/context.py)) - *ä»£ç ç¬¦å· (Code Symbol).*
    ```python
    name: str
    kind: str # 'class' | 'function' | 'method'
    line: int
    docstring: Optional[str] = None
    signature: Optional[str] = None # e.g. "(x: int) -> int"
    parent: Optional[str] = None # e.g. "ClassName" for methods/fields
    is_core: bool = False # Whether symbol is marked as @CORE
    visibility: str = "public" # 'public' | 'private' | 'protected'
    lang: str = "unknown" # Language key (e.g., 'python', 'go')
    decorators: List[str] = field(default_factory=list)
    ```
*   **Tag** ([src/ndoc/models/context.py](src/ndoc/models/context.py)) - *æ–‡æ¡£/ä»£ç æ ‡ç­¾ (Documentation/Code Tag).*
    ```python
    name: str
    args: List[str] = field(default_factory=list)
    line: int = 0
    raw: str = ""
    ```
*   **TodoItem** ([src/ndoc/flows/todo_flow.py](src/ndoc/flows/todo_flow.py))
    ```python
    file_path: Path
    line: int
    type: str  # TODO, FIXME, etc.
    content: str
    task_id: Optional[str] = None
    icons = {
    "FIXME": "ğŸ”´", # High
    "XXX": "ğŸŸ£",   # Critical
    "HACK": "ğŸš§",  # Warning
    "TODO": "ğŸ”µ",  # Medium
    ```
*   **TokenRule** ([src/ndoc/atoms/scanner.py](src/ndoc/atoms/scanner.py)) - *è¯æ³•åˆ†æè§„åˆ™ (Lexical Analysis Rule).*
    ```python
    name: str
    pattern: Pattern
    group_map: Dict[str, int]  # Map logical names to regex groups
    ```


---
*Generated by Niki-docAI*